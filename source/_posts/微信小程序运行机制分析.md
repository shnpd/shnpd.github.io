---
title: 微信小程序运行机制分析
toc: true
date: 2023-12-29 14:40:13
tags: 微信小程序 小程序
categories: 小程序
---

​​点击阅读更多查看文章内容<!--more-->

# setData渲染机制
![在这里插入图片描述](https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/1e79c06e6361283a5e2ccc7fcc420cbe_1740930192419.png)
Native就是微信客户端，逻辑层JsCore（js文件）通过setdata把数据送到渲染层Webview（小程序页面，wxml文件），渲染层接收到数据后就会改变对应的元素值。用户在小程序页面进行操作可以触发event，event传给Native再重新路由到逻辑层JsCore
# 生命周期

[小程序的生命周期：](https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/operating-mechanism.html)

![在这里插入图片描述](https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/222aec4849a70f688f29c364e1d9ad46_1740930192419.png)

- onLaunch：启动
- onShow：显示
- onHide：隐藏

[页面生命周期：](https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page-life-cycle.html)

![在这里插入图片描述](https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/136f3b7386ce56d8d18eb14f4b5f3499_1740930192419.png)

[页面路由](https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/route.html)
框架以栈的形式维护了当前的所有页面。 当发生路由切换的时候，页面栈的表现如下：

|  路由方式| 	页面栈表现 |
|--|--|
|初始化  | 新页面入栈 |
| 打开新页面 |新页面入栈  |
| 页面重定向 |  当前页面出栈，新页面入栈|
|页面返回|	页面不断出栈，直到目标返回页|
|Tab 切换|	页面全部出栈，只留下新的 Tab 页面|
|重加载|页面全部出栈，只留下新的页面|
