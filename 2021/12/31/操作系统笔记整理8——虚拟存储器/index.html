<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>操作系统笔记整理8——虚拟存储器 - shn&#039;s blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="shn&#039;s blog"><meta name="msapplication-TileImage" content="/images/icon_blog.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="shn&#039;s blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="​​点击阅读更多查看文章内容"><meta property="og:type" content="blog"><meta property="og:title" content="操作系统笔记整理8——虚拟存储器"><meta property="og:url" content="https://shnpd.github.io/2021/12/31/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%868%E2%80%94%E2%80%94%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8%E5%99%A8/"><meta property="og:site_name" content="shn&#039;s blog"><meta property="og:description" content="​​点击阅读更多查看文章内容"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/4cbdd93bb9e5bfdcda1f1293ea4012db_1740931179977.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/7c63f494bfbdaab77fb3c4026fb82086_1740931179977.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/cb5e32a2d2759448a2a984638f3aceda_1740931179977.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/408a27175e0ec683a7b8f2f7d8bd7ecb_1740931179977.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/8bb99936580b40753628d4827a7576c9_1740931179977.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/7530619eb6bf5f0ac8d7927a1aaae93b_1740931187228.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/86a19cca59e7b4e9b137999f6bced255_1740931187228.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/8863582aadc143cf8dc04b8d8eccc8b2_1740931187228.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/229ab32e52692c185fcc40b3089c3931_1740931187228.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/f3bcb6d68e1144401e539ee62621b702_1740931187228.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/abc66c5874e29f4247cca4fde0417a47_1740931194253.png"><meta property="article:published_time" content="2021-12-31T12:23:50.000Z"><meta property="article:modified_time" content="2025-03-10T08:05:21.726Z"><meta property="article:author" content="ShiHaonan"><meta property="article:tag" content="操作系统"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/4cbdd93bb9e5bfdcda1f1293ea4012db_1740931179977.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://shnpd.github.io/2021/12/31/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%868%E2%80%94%E2%80%94%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8%E5%99%A8/"},"headline":"操作系统笔记整理8——虚拟存储器","image":["https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/4cbdd93bb9e5bfdcda1f1293ea4012db_1740931179977.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/7c63f494bfbdaab77fb3c4026fb82086_1740931179977.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/cb5e32a2d2759448a2a984638f3aceda_1740931179977.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/408a27175e0ec683a7b8f2f7d8bd7ecb_1740931179977.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/8bb99936580b40753628d4827a7576c9_1740931179977.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/7530619eb6bf5f0ac8d7927a1aaae93b_1740931187228.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/86a19cca59e7b4e9b137999f6bced255_1740931187228.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/8863582aadc143cf8dc04b8d8eccc8b2_1740931187228.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/229ab32e52692c185fcc40b3089c3931_1740931187228.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/f3bcb6d68e1144401e539ee62621b702_1740931187228.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/abc66c5874e29f4247cca4fde0417a47_1740931194253.png"],"datePublished":"2021-12-31T12:23:50.000Z","dateModified":"2025-03-10T08:05:21.726Z","author":{"@type":"Person","name":"ShiHaonan"},"publisher":{"@type":"Organization","name":"shn's blog","logo":{"@type":"ImageObject","url":{"text":"shn's blog"}}},"description":"​​点击阅读更多查看文章内容"}</script><link rel="canonical" href="https://shnpd.github.io/2021/12/31/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%868%E2%80%94%E2%80%94%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8%E5%99%A8/"><link rel="icon" href="/images/icon_blog.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><meta name="msvalidate.01" content="E38AFEA650A8300110261393E7FD0A39"><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">shn&#039;s blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-31T12:23:50.000Z" title="12/31/2021, 8:23:50 PM">2021-12-31</time>发表</span><span class="level-item"><time dateTime="2025-03-10T08:05:21.726Z" title="3/10/2025, 4:05:21 PM">2025-03-10</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></span><span class="level-item">31 分钟读完 (大约4655个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">操作系统笔记整理8——虚拟存储器</h1><div class="content"><p>​​点击阅读更多查看文章内容<span id="more"></span></p>
<h1 id="点此链接可跳转到：操作系统笔记整理——目录索引页"><a href="#点此链接可跳转到：操作系统笔记整理——目录索引页" class="headerlink" title="点此链接可跳转到：操作系统笔记整理——目录索引页"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/shn111/article/details/122296621">点此链接可跳转到：操作系统笔记整理——目录索引页</a></h1><blockquote>
<p>参考书籍：《计算机操作系统》第四版 汤小丹等编著</p>
</blockquote>
<blockquote>
<p>@[toc]</p>
</blockquote>
<h1 id="虚拟存储器概述"><a href="#虚拟存储器概述" class="headerlink" title="虚拟存储器概述"></a>虚拟存储器概述</h1><p>虚拟存储器：指具有调入功能和置换功能，能从逻辑上对内存容量加以扩充的一种存储器系统<br><strong>请求调入功能</strong>：在程序执行过程中，如果需执行的指令或访问的数据尚未在内存（称为缺页或缺段），则由处理器通知操作系统将相应的页或段调入到内存，然后继续执行程序</p>
<p><strong>置换功能</strong>：操作系统将内存中暂时不使用的页或段调出保存在外存上，从而腾出空间存放将要装入的程序以及将要调入的页或段</p>
<p><strong>虚拟存储</strong>：具有请求调入功能和置换功能，能从逻辑上对内存容量加以扩充的一种存储器系统</p>
<p><strong>速度和容量</strong>：虚拟存储量的扩大是以牺牲 CPU 工作时间以及内外存交换 时间为代价。<br>虚拟存储器的容量取决于主存与辅存的容量，最大容量是由计算机的地 址结构决定。<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/4cbdd93bb9e5bfdcda1f1293ea4012db_1740931179977.png" alt="在这里插入图片描述"></p>
<h1 id="请求分页存储管理方式"><a href="#请求分页存储管理方式" class="headerlink" title="请求分页存储管理方式"></a>请求分页存储管理方式</h1><h2 id="请求页表机制"><a href="#请求页表机制" class="headerlink" title="请求页表机制"></a>请求页表机制</h2><p><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/7c63f494bfbdaab77fb3c4026fb82086_1740931179977.png" alt="在这里插入图片描述"><br>状态位P：表示该页是否已调入内存，供程序访问时参考<br>访问字段A：记录本页在一段时间内被访问的次数或最近未被访问的时间，供选择页面换出时参考<br>修改位M：表示该页在调入内存后是否被修改过，若修改过，则置换该页时需重写该页至外存，供置换页面时参考<br>外存地址：指出该页在外存上的地址，供调入该页时参考</p>
<h2 id="地址变换"><a href="#地址变换" class="headerlink" title="地址变换"></a>地址变换</h2><p><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/cb5e32a2d2759448a2a984638f3aceda_1740931179977.png" alt="在这里插入图片描述"></p>
<h2 id="物理块的分配策略"><a href="#物理块的分配策略" class="headerlink" title="物理块的分配策略"></a>物理块的分配策略</h2><ul>
<li>固定分配局部置换<br>固定分配：为每个进程分配固定数目n的物理块，在进程运行期间不再改变<br>局部置换：如果进程在运行过程中发现缺页，则只能从分配给该进程的n个页面中选出一页换出，再调入一页，以保证分配给该进程的内存空间不变。</li>
<li>可变分配全局置换<br>可变分配：先为每个进程分配一定数目的物理块，在进程运行期间，可根据情况做适当的增加或减少<br>全局置换：如果进程在运行中发现缺页，则将OS所保留的空闲物理块取出一块分配给该进程，或者以所有进程的全部物理块为标的，选择一块换出，然后将所缺之页调入</li>
<li>可变分配局部置换</li>
</ul>
<h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><blockquote>
<p>例：一个采用请求分页存储管理的计算机系统，其内存（实存）容量为256M 字节，虚拟内存容量（给用户的最大地址空间）为 4G 字节，页面大 小为 4K 字节，试问：<br>实存物理地址应设为多少位？28 位<br>实存中有多少物理块？64K<br>实存中最大块号是多少？64K-1<br>虚存地址应设多少位？32   位	<br>虚拟地址空间最多可以有多少页？1M<br>页内最大偏移量是多少？4095</p>
</blockquote>
<h2 id="何时调页"><a href="#何时调页" class="headerlink" title="何时调页"></a>何时调页</h2><ul>
<li>预调页策略<br>预调页：将预计在不久之后便会被访问的页面预先调入内存。<br>进程的页一般存放在外存的一个连续区域中。一次调入若干个相邻的页会 比一次调入一页更高效。<br>但如果调入的一批页面中的大多数都未被访问，则浪费了内存。</li>
<li>请求调页策略<br>当进程在运行中发生缺页时，就立即提出请求，由系统将缺页调入内存。 但这种策略每次仅调入一页，须花费较大的系统开销，增加了启动磁盘 I&#x2F;O  的频率。</li>
</ul>
<h2 id="何处调页"><a href="#何处调页" class="headerlink" title="何处调页"></a>何处调页</h2><p>在请求分页系统中，外存分成了按离散分配方式存放文件的文件区和按连续分配 方式存放对换页的对换区。进程发出缺页请求时，从何处将缺页调入内存呢？</p>
<ul>
<li>对换区：如果系统有足够的对换区空间，运行前可将与进程相关的文件从文件 区复制至对换区，以后缺页时全部从对换区调页。</li>
<li>文件区：如果系统没有足够的对换区空间，凡是不会被修改的文件，直接从文 件区调页，不必回写（换出）。对可能会修改的文件第一次直接从文件区调页， 换出时换至对换区，以后从对换区调页。</li>
<li>UNIX 方式：凡未运行过的页面均从文件区调页，运行过的页面和换出的页面均 从对换区调页。</li>
</ul>
<h2 id="缺页率"><a href="#缺页率" class="headerlink" title="缺页率"></a>缺页率</h2><p>访问页 面成功（页在内存）次数为 S，缺页（页不在内存）次数为 F，则缺页率为：<br>$$f&#x3D;  \frac{F}{F + S}$$</p>
<h1 id="页面置换算法"><a href="#页面置换算法" class="headerlink" title="页面置换算法"></a>页面置换算法</h1><h2 id="抖动"><a href="#抖动" class="headerlink" title="抖动"></a>抖动</h2><p>刚被淘汰出内存的页面，过后不久又要访问它，需要再次将其调入，而该页调入内存后不久又再次被淘汰出内存，然后又要访问它，如此反复，使得系统把大部分时间用在了页面的调进换出上，这种现象称为抖动。</p>
<h2 id="最佳置换算法（OPT）"><a href="#最佳置换算法（OPT）" class="headerlink" title="最佳置换算法（OPT）"></a>最佳置换算法（OPT）</h2><p>OPT：Optimal permutation algorithm</p>
<p>选择在最长时间内不再被访问的页面置换出</p>
<p>最佳置换算法是一种理想化的算法，性能最好，实际上这种算法无法实 现，因为页面访问的未来顺序很难精确预测，但可用该算法评价其它算 法的优劣。</p>
<blockquote>
<p>例：假定系统为某进程分配了 3 个物理块，进程运行时的页面走向为1,2,3,4,1,2,5,1,2,3,4,5，开始时 3 个物理块均为空，计算采用最佳置换算 法时的缺页率？<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/408a27175e0ec683a7b8f2f7d8bd7ecb_1740931179977.png" alt="在这里插入图片描述"><br>缺页率：7&#x2F;12</p>
</blockquote>
<h2 id="先进先出置换算法（FIFO）"><a href="#先进先出置换算法（FIFO）" class="headerlink" title="先进先出置换算法（FIFO）"></a>先进先出置换算法（FIFO）</h2><p>选择先进入内存的页面予以淘汰</p>
<blockquote>
<p>假定系统为某进程分配了3 个物理块， 进程运行时的页面走向为1,2,3,4,1,2,5,1,2,3,4,5，开始时 3 个物理块均为空，计算采用先进先出置换 算法时的缺页率？<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/8bb99936580b40753628d4827a7576c9_1740931179977.png" alt="在这里插入图片描述"><br>缺页率：9&#x2F;12</p>
</blockquote>
<p><strong>先进先出算法存在一种异常现象，即在某些情况下会出现分配给进程的物理块数增多，缺页次数有时增加，有时减少的奇怪现象，这种现象称为Belady异常现象</strong></p>
<h2 id="最近最久未使用算法（LRU）"><a href="#最近最久未使用算法（LRU）" class="headerlink" title="最近最久未使用算法（LRU）"></a>最近最久未使用算法（LRU）</h2><p>LRU：Least recently used<br>选择最近一段时间最长时间没有被访问过的页面予以淘汰</p>
<blockquote>
<p>例： 假定系统为某进程分配了3 个物理块， 进程运行时的页面走向为1,2,3,4,1,2,5,1,2,3,4,5，开始时 3 个物理块均为空，计算采用最近最久未使 用算法时的缺页率？<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/7530619eb6bf5f0ac8d7927a1aaae93b_1740931187228.png" alt="在这里插入图片描述"><br>缺页率：10&#x2F;12</p>
</blockquote>
<h3 id="硬件支持"><a href="#硬件支持" class="headerlink" title="硬件支持"></a>硬件支持</h3><p><strong>寄存器</strong>：记录某个进程在内存中各页的使用情况，为每个进程在内存中的页面配置一个移位寄存器，可表示为R&#x3D;R<del>n-1</del>R<del>n-2</del>R<del>n-3</del>……R<del>2</del>R<del>1</del>R<del>0</del><br>每当进程访问某页面时，将该页面对应寄存器的最高位 (Rn−1) 置 1，系统定期 (如 100ms) 将寄存器右移一位并将最高位补 0，如果把 n 位寄存器的数 看作是一个整数，于是寄存器数值最小的页面是最久未使用的页面。<br><strong>栈</strong>：<br>利用一特殊的栈保存当前使用的页号，每当进程访问某页面时，把被访问 页面移到栈顶，于是栈底的页面就是最久未使用的页面。</p>
<h2 id="最近最少使用置换算法（LFU）"><a href="#最近最少使用置换算法（LFU）" class="headerlink" title="最近最少使用置换算法（LFU）"></a>最近最少使用置换算法（LFU）</h2><p>LFU：Least frequently used<br>选择在最近时期使用最少的页面为淘汰页<br>LFU 置换算法为在内存中的每个页面设置一个移位寄存器来记录该页面 被访问的频率。<br>每当进程访问某页面时，将该页面对应寄存器的最高位 (R<del>n−1</del>) 置 1，系统定期 (如 100ms) 将寄存器右移一位并将最高位补 0。在一段时间内，ΣR<del>i</del>最小的页面就是最近最少使用的页面。</p>
<p><font color='red'>LRU 是看时间长短，而 LFU 是看使用频率。</font></p>
<h2 id="Clock置换算法"><a href="#Clock置换算法" class="headerlink" title="Clock置换算法"></a>Clock置换算法</h2><p>该算法为每页设置一个访问位，并将内存中的所有页链接成一个循环队列。当某页被访问时，其访问位被置1<br>置换算法在选择一页淘汰时，只需检查页的访问位，如果是0，就选择该页换出；若为1，则重新将它置0，暂不换出，再按照FIFO算法检查下一个页面（循环，不是回到队首）</p>
<blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/86a19cca59e7b4e9b137999f6bced255_1740931187228.png" alt="在这里插入图片描述"><br>注：上图中插入倒数第二个页面时，物理块2中的2不带星号，图片有误</p>
</blockquote>
<h2 id="改进型Clock置换算法"><a href="#改进型Clock置换算法" class="headerlink" title="改进型Clock置换算法"></a>改进型Clock置换算法</h2><p>除须考虑页面的使用情况外，还增加一个因素，即置换代价，这样选择页面换出时，既要是未使用过的页面，又要是未被修改过的页面。</p>
<p>由访问位 A 和修改位 M 可以组合成下面四种类型的页面：</p>
<ol>
<li>A&#x3D;0, M&#x3D;0: 最佳淘汰页</li>
<li>A&#x3D;0, M&#x3D;1</li>
<li>A&#x3D;1, M&#x3D;0</li>
<li>A&#x3D;1, M&#x3D;1</li>
</ol>
<p>1 从指针所指示的当前位置开始扫描循环队列，寻找 A&#x3D;0 且 M&#x3D;0 的第一类页面，将所遇到的第一个页面作为所选中的淘汰页。在第一次扫描期间 不改变访问位 A。<br>2 如果第一步失败，开始第二轮扫描，寻找 A&#x3D;0 且 M&#x3D;1 的第二类页面，将所遇到的第一个这类页面作为淘汰页。在第二轮扫描期间，将所有扫描过的页面的访问位都置 0。<br>3 如果第二步也失败，则将指针返回到开始的位置，并将所有的访问位复0。然后重复第一步，如果仍失败，必要时再重复第二步。</p>
<blockquote>
<p><strong>页面置换算法的比较</strong><br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/8863582aadc143cf8dc04b8d8eccc8b2_1740931187228.png" alt="在这里插入图片描述"></p>
</blockquote>
<h2 id="页面缓冲算法"><a href="#页面缓冲算法" class="headerlink" title="页面缓冲算法"></a>页面缓冲算法</h2><p>页面缓冲算法：用FIFO算法选择被置换页，选择换出的页不是立即换出，而是放入两个链表之一，如果页面未被修改，就将其归入到空闲页面链表的末尾，否则将其归入以修改页面链表的末尾。<br>这些空闲页面和已修改页面会在内存中停留一段时间。如果这些页面被再次访问，只需将其从相应链表中移出，就可以返回进程，从而减少一次 I&#x2F;O 开销。<br>需调入新页，则将新页读入到空闲页面链表的第一个页面中，然后将其从该链表中移出。<br>当已修改的页面达到一定数目后，再将它们一起写入磁盘。这样能大大减少 I&#x2F;O 操作的次数。</p>
<h2 id="访问内存的有效时间（EAT）"><a href="#访问内存的有效时间（EAT）" class="headerlink" title="访问内存的有效时间（EAT）"></a>访问内存的有效时间（EAT）</h2><ol>
<li>被访问页在内存，且对应的页表项在快表中<br>设访问快表的时间为 λ，访问内存的时间为 t。<br>EAT &#x3D; λ + t</li>
<li>被访问页面在内存，但对应的页表项不在快表中。<br>这种情况不缺页，但需两次访问内存。一次读页表，并更新快表，一次读数据。<br>EAT &#x3D;  λ（查快表） + t（读页表） + λ（更新快表） + t（读数据）</li>
<li>被访问页面不在内存。设缺页中断处理时间为 ϵ。<br>EAT&#x3D; λ（查快表） + t（读页表）+ ϵ（缺页中断处理） + λ（更新快表） + t（读数据）</li>
<li>考虑快表的命中率 a，和缺页率 f<br>EAT &#x3D;  （查快表）λ + （快表命中）a × t + （快表未命中）（1 - a）× （（查页表）t + （缺页）f × （ϵ + λ + t）+ (不缺页)（1 - f）×（λ + t））</li>
</ol>
<p>内存访问时间 t	约为 100ns(纳秒)&#x3D;0.1μs (微秒)<br>缺页中断时间 ϵ	约为 25ms (毫秒) &#x3D;25000 μs (微秒)</p>
<h1 id="抖动与工作集"><a href="#抖动与工作集" class="headerlink" title="抖动与工作集"></a>抖动与工作集</h1><p>产生抖动的根本原因是，同时在系统中运行的进程太多，由此分配给每一个进程的物理块太少，不能满足进程正常运行的基本要求，致使每个进程在运行时，频繁地出现缺页，必须请求系统将所缺之页调入内存。</p>
<blockquote>
<p>驻留集：指请求分页存储管理中给进程分配的物理页面（块）的集合。<br>每个进程的驻留集越小，则同时驻留内存的进程就越多，CPU 利用率越高。<br>进程的驻留集太小的话，则缺页率高，请求调页的开销增大。<br>抖动的原因：多道程序度过高，导致平均驻留集过小。</p>
</blockquote>
<p>工作集是指在某段时间间隔 ∆ 里，进程实际要访问的页面的集合。<br>把进程在某段时间间隔 ∆ 里，在时间 t 的工作集记为 w(t,∆)，变量 ∆ 称 为工作集“窗口尺寸”。</p>
<blockquote>
<p>下图是某进程访问页面的序列和窗口大小分别为3，4，5时的工作集。可将工作集定义为，进程在时间间隔（t-∆，t）中引用页面的集合<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/229ab32e52692c185fcc40b3089c3931_1740931187228.png" alt="在这里插入图片描述"></p>
</blockquote>
<p>如果页面正在使用，它就落在工作集中；如果不再使用，它将不出现在 相应的工作集中。工作集是局部性原理的近似表示。</p>
<p><strong>抖动的预防方法</strong></p>
<ol>
<li>采取局部置换策略<br>仅允许进程在自身范围内进行置换。即使发生抖动，也可以把影响限制 在较小范围内。</li>
<li>在处理机调度中引入工作集策略</li>
<li>用 L&#x3D;S 准则调节缺页率（Denning, 1980）<br>L：缺页之间的平均时间。S：平均缺页服务时间<br>L 大于 S，很少缺页，磁盘能力没有被充分利用。<br>L 小于 S，频繁缺页，超过磁盘的处理能力。<br>调整并发程序度，使得 L 与 S 接近。这种情况下，磁盘和处理机到可以达 到最佳利用率。<br>一种类似的策略称为“50% 准则”策略：让磁盘保持50% 的利用率，这时CPU也达到最高的利用率。</li>
<li>挂起若干进程<br>当多道程序度偏高，已影响到处理机的利用率时，为了防止发生抖动，系统必须减少多道程序的数目。把某些进程挂起，从而腾出内存空间。</li>
</ol>
<h1 id="请求分段存储管理"><a href="#请求分段存储管理" class="headerlink" title="请求分段存储管理"></a>请求分段存储管理</h1><p><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/f3bcb6d68e1144401e539ee62621b702_1740931187228.png" alt="在这里插入图片描述"><br>存取方式：由于应用程序中的段是信息的逻辑单位，可根据该信息的属性对它实施保护，故在段表中增加存取方式字段，如果该字段为两位，则存取属性是只执行、只读和允许读&#x2F;写<br>存在位：指示本段是否已调入内存<br>增补位：表示本段在运行过程中是否做过动态增长</p>
<h2 id="共享段表"><a href="#共享段表" class="headerlink" title="共享段表"></a>共享段表</h2><p>共享段计数count：记录有多少进程正在共享该分段<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/abc66c5874e29f4247cca4fde0417a47_1740931194253.png" alt="在这里插入图片描述"></p>
<p><strong>共享段的分配</strong><br>当第一个使用共享段的进程提出请求时，由系统为该共享段分配一物理 区，并调入该共享段，同时修改相应的段表（该段的内存地址）和共享 段表，把 count 置为 1 。当其它进程需要调用此段时，不需再调入，只 需修改相应的段表和共享段表，再执行 count :&#x3D;count+1 操作。<br><strong>共享段的回收</strong><br>当共享共享段的某进程不再使用该共享段时，修改相应的段表和共享段 表，执行 count :&#x3D;count-1 操作。当最后一共享此段的进程也不再需要此 段时，则系统回收此共享段的物理区，同时修改共享段表（删除该表项）。</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>操作系统笔记整理8——虚拟存储器</p><p><a href="https://shnpd.github.io/2021/12/31/操作系统笔记整理8——虚拟存储器/">https://shnpd.github.io/2021/12/31/操作系统笔记整理8——虚拟存储器/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>ShiHaonan</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-12-31</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2025-03-10</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/images/alipay.jpg" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/images/wxpay.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/01/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%869%E2%80%94%E2%80%94%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E7%B3%BB%E7%BB%9F%EF%BC%881%EF%BC%89/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">操作系统笔记整理9——输入输出系统（1）</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/12/30/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%867%E2%80%94%E2%80%94%E5%AD%98%E5%82%A8%E5%99%A8%E7%AE%A1%E7%90%86%EF%BC%882%EF%BC%89/"><span class="level-item">操作系统笔记整理7——存储器管理（2）</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card" id="comments"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://shnpd.github.io/2021/12/31/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%868%E2%80%94%E2%80%94%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8%E5%99%A8/';
            this.page.identifier = '2021/12/31/操作系统笔记整理8——虚拟存储器/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'shns-blog' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#点此链接可跳转到：操作系统笔记整理——目录索引页"><span class="level-left"><span class="level-item">1</span><span class="level-item">点此链接可跳转到：操作系统笔记整理——目录索引页</span></span></a></li><li><a class="level is-mobile" href="#虚拟存储器概述"><span class="level-left"><span class="level-item">2</span><span class="level-item">虚拟存储器概述</span></span></a></li><li><a class="level is-mobile" href="#请求分页存储管理方式"><span class="level-left"><span class="level-item">3</span><span class="level-item">请求分页存储管理方式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#请求页表机制"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">请求页表机制</span></span></a></li><li><a class="level is-mobile" href="#地址变换"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">地址变换</span></span></a></li><li><a class="level is-mobile" href="#物理块的分配策略"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">物理块的分配策略</span></span></a></li><li><a class="level is-mobile" href="#例题"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">例题</span></span></a></li><li><a class="level is-mobile" href="#何时调页"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">何时调页</span></span></a></li><li><a class="level is-mobile" href="#何处调页"><span class="level-left"><span class="level-item">3.6</span><span class="level-item">何处调页</span></span></a></li><li><a class="level is-mobile" href="#缺页率"><span class="level-left"><span class="level-item">3.7</span><span class="level-item">缺页率</span></span></a></li></ul></li><li><a class="level is-mobile" href="#页面置换算法"><span class="level-left"><span class="level-item">4</span><span class="level-item">页面置换算法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#抖动"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">抖动</span></span></a></li><li><a class="level is-mobile" href="#最佳置换算法（OPT）"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">最佳置换算法（OPT）</span></span></a></li><li><a class="level is-mobile" href="#先进先出置换算法（FIFO）"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">先进先出置换算法（FIFO）</span></span></a></li><li><a class="level is-mobile" href="#最近最久未使用算法（LRU）"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">最近最久未使用算法（LRU）</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#硬件支持"><span class="level-left"><span class="level-item">4.4.1</span><span class="level-item">硬件支持</span></span></a></li></ul></li><li><a class="level is-mobile" href="#最近最少使用置换算法（LFU）"><span class="level-left"><span class="level-item">4.5</span><span class="level-item">最近最少使用置换算法（LFU）</span></span></a></li><li><a class="level is-mobile" href="#Clock置换算法"><span class="level-left"><span class="level-item">4.6</span><span class="level-item">Clock置换算法</span></span></a></li><li><a class="level is-mobile" href="#改进型Clock置换算法"><span class="level-left"><span class="level-item">4.7</span><span class="level-item">改进型Clock置换算法</span></span></a></li><li><a class="level is-mobile" href="#页面缓冲算法"><span class="level-left"><span class="level-item">4.8</span><span class="level-item">页面缓冲算法</span></span></a></li><li><a class="level is-mobile" href="#访问内存的有效时间（EAT）"><span class="level-left"><span class="level-item">4.9</span><span class="level-item">访问内存的有效时间（EAT）</span></span></a></li></ul></li><li><a class="level is-mobile" href="#抖动与工作集"><span class="level-left"><span class="level-item">5</span><span class="level-item">抖动与工作集</span></span></a></li><li><a class="level is-mobile" href="#请求分段存储管理"><span class="level-left"><span class="level-item">6</span><span class="level-item">请求分段存储管理</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#共享段表"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">共享段表</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-03-02T16:00:00.000Z">2025-03-03</time></p><p class="title"><a href="/2025/03/03/gonote/CSP%E6%A8%A1%E5%9E%8B/">【Go】CSP模型</a></p><p class="categories"><a href="/categories/Golang/">Golang</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-03-02T16:00:00.000Z">2025-03-03</time></p><p class="title"><a href="/2025/03/03/gonote/Channel/">【Go】Channel</a></p><p class="categories"><a href="/categories/Golang/">Golang</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-03-02T16:00:00.000Z">2025-03-03</time></p><p class="title"><a href="/2025/03/03/gonote/Context/">【Go】Context</a></p><p class="categories"><a href="/categories/Golang/">Golang</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-03-02T16:00:00.000Z">2025-03-03</time></p><p class="title"><a href="/2025/03/03/gonote/defer&amp;os.Exit()/">【Go】defer和os.Exit()</a></p><p class="categories"><a href="/categories/Golang/">Golang</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-03-02T16:00:00.000Z">2025-03-03</time></p><p class="title"><a href="/2025/03/03/gonote/GMP%E6%A8%A1%E5%9E%8B/">【Go】GMP模型</a></p><p class="categories"><a href="/categories/Golang/">Golang</a></p></div></article></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Fabric/"><span class="level-start"><span class="level-item">Fabric</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Golang/"><span class="level-start"><span class="level-item">Golang</span></span><span class="level-end"><span class="level-item tag">44</span></span></a></li><li><a class="level is-mobile" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Shell%E8%84%9A%E6%9C%AC/"><span class="level-start"><span class="level-item">Shell脚本</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/bytedance/"><span class="level-start"><span class="level-item">bytedance</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%BB%A5%E5%A4%AA%E5%9D%8A/"><span class="level-start"><span class="level-item">以太坊</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%88%B7%E9%A2%98%E9%9B%86/"><span class="level-start"><span class="level-item">刷题集</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"><span class="level-start"><span class="level-item">区块链</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%AD%A6%E6%9C%AF/"><span class="level-start"><span class="level-item">学术</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"><span class="level-start"><span class="level-item">密码学</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"><span class="level-start"><span class="level-item">小程序</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"><span class="level-start"><span class="level-item">技术总结</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/%E5%85%B6%E5%AE%83/"><span class="level-start"><span class="level-item">其它</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="level-start"><span class="level-item">操作系统</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="level-start"><span class="level-item">数据结构</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">机器学习</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%9D%82%E9%A1%B9/"><span class="level-start"><span class="level-item">杂项</span></span><span class="level-end"><span class="level-item tag">31</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%AF%94%E7%89%B9%E5%B8%81/"><span class="level-start"><span class="level-item">比特币</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/"><span class="level-start"><span class="level-item">知识点整理</span></span><span class="level-end"><span class="level-item tag">19</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/mysql/"><span class="level-start"><span class="level-item">mysql</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/redis/"><span class="level-start"><span class="level-item">redis</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="level-start"><span class="level-item">操作系统</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><span class="level-start"><span class="level-item">计算机网络</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">算法</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"><span class="level-start"><span class="level-item">网络安全</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><span class="level-start"><span class="level-item">计算机网络</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li></ul></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">shn&#039;s blog</a><p class="is-size-7"><span>&copy; 2025 ShiHaonan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">Welcome to shn's blog!</p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>