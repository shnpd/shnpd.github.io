<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>操作系统笔记整理7——存储器管理（2） - shn&#039;s blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="shn&#039;s blog"><meta name="msapplication-TileImage" content="/images/icon_blog.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="shn&#039;s blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="​​点击阅读更多查看文章内容"><meta property="og:type" content="blog"><meta property="og:title" content="操作系统笔记整理7——存储器管理（2）"><meta property="og:url" content="https://shnpd.github.io/2021/12/30/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%867%E2%80%94%E2%80%94%E5%AD%98%E5%82%A8%E5%99%A8%E7%AE%A1%E7%90%86%EF%BC%882%EF%BC%89/"><meta property="og:site_name" content="shn&#039;s blog"><meta property="og:description" content="​​点击阅读更多查看文章内容"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/dedf0815fa70f0e55de49e0d543a105f_1740931194253.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/cee543fee501755563b215e35c00980b_1740931194253.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/560a75a47c6e4646f8df021ac45da011_1740931194253.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/82c662adc1175a4c974f7c3cb2a1a2d3_1740931194253.png"><meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/2ac2587984a76dac5d7d32d4580980c2.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/a7da58904dc404185ce324680997b6c6_1740931202913.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/d57590badcf35a22549842be80c41ff0_1740931202913.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/ee6a1d0f78f201c97e79276073681164_1740931202913.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/f95e3896d6fe4b2fabbe9d79e97a3908_1740931202913.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/c723c4ba4ea2837275d8a3fa6e0f599f_1740931202913.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/7ee4b0fddaa202b7f600218185103ebf_1740931209630.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/5946c749081696234364befd8d0ea529_1740931209630.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/2c193c15fb19708d160d99bacf51719f_1740931209630.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/418824adab6e36f209e5bea62bf76e79_1740931209630.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/10c1a8d5af931761c47d6933bc3c7716_1740931209630.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/acfcd7b61483fa0fc282902e8b7edce6_1740931218965.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/3e54dbf18d43710129394ef9b823ade3_1740931218965.png"><meta property="article:published_time" content="2021-12-30T12:48:18.000Z"><meta property="article:modified_time" content="2025-03-13T08:46:42.528Z"><meta property="article:author" content="ShiHaonan"><meta property="article:tag" content="os 操作系统"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/dedf0815fa70f0e55de49e0d543a105f_1740931194253.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://shnpd.github.io/2021/12/30/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%867%E2%80%94%E2%80%94%E5%AD%98%E5%82%A8%E5%99%A8%E7%AE%A1%E7%90%86%EF%BC%882%EF%BC%89/"},"headline":"操作系统笔记整理7——存储器管理（2）","image":["https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/dedf0815fa70f0e55de49e0d543a105f_1740931194253.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/cee543fee501755563b215e35c00980b_1740931194253.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/560a75a47c6e4646f8df021ac45da011_1740931194253.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/82c662adc1175a4c974f7c3cb2a1a2d3_1740931194253.png","https://i-blog.csdnimg.cn/blog_migrate/2ac2587984a76dac5d7d32d4580980c2.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/a7da58904dc404185ce324680997b6c6_1740931202913.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/d57590badcf35a22549842be80c41ff0_1740931202913.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/ee6a1d0f78f201c97e79276073681164_1740931202913.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/f95e3896d6fe4b2fabbe9d79e97a3908_1740931202913.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/c723c4ba4ea2837275d8a3fa6e0f599f_1740931202913.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/7ee4b0fddaa202b7f600218185103ebf_1740931209630.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/5946c749081696234364befd8d0ea529_1740931209630.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/2c193c15fb19708d160d99bacf51719f_1740931209630.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/418824adab6e36f209e5bea62bf76e79_1740931209630.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/10c1a8d5af931761c47d6933bc3c7716_1740931209630.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/acfcd7b61483fa0fc282902e8b7edce6_1740931218965.png","https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/3e54dbf18d43710129394ef9b823ade3_1740931218965.png"],"datePublished":"2021-12-30T12:48:18.000Z","dateModified":"2025-03-13T08:46:42.528Z","author":{"@type":"Person","name":"ShiHaonan"},"publisher":{"@type":"Organization","name":"shn's blog","logo":{"@type":"ImageObject","url":{"text":"shn's blog"}}},"description":"​​点击阅读更多查看文章内容"}</script><link rel="canonical" href="https://shnpd.github.io/2021/12/30/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%867%E2%80%94%E2%80%94%E5%AD%98%E5%82%A8%E5%99%A8%E7%AE%A1%E7%90%86%EF%BC%882%EF%BC%89/"><link rel="icon" href="/images/icon_blog.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><meta name="msvalidate.01" content="E38AFEA650A8300110261393E7FD0A39"><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">shn&#039;s blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-30T12:48:18.000Z" title="12/30/2021, 8:48:18 PM">2021-12-30</time>发表</span><span class="level-item"><time dateTime="2025-03-13T08:46:42.528Z" title="3/13/2025, 4:46:42 PM">2025-03-13</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></span><span class="level-item">27 分钟读完 (大约4047个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">操作系统笔记整理7——存储器管理（2）</h1><div class="content"><p>​​点击阅读更多查看文章内容<span id="more"></span></p>
<h1 id="点此链接可跳转到：操作系统笔记整理——目录索引页"><a href="#点此链接可跳转到：操作系统笔记整理——目录索引页" class="headerlink" title="点此链接可跳转到：操作系统笔记整理——目录索引页"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/shn111/article/details/122296621">点此链接可跳转到：操作系统笔记整理——目录索引页</a></h1><blockquote>
<p>参考书籍：《计算机操作系统》第四版 汤小丹等编著</p>
</blockquote>
<blockquote>
<p>@[toc]</p>
</blockquote>
<h1 id="离散分配方式"><a href="#离散分配方式" class="headerlink" title="离散分配方式"></a>离散分配方式</h1><p>连续分配存储管理方式产生的问题：<br>1.要求连续的存储区<br>2.碎片问题</p>
<p>变连续分配为离散分配，允许将作业离散放到多个不相邻接的分区中</p>
<p>离散分配方式包括：<br>1.分页式存储管理：离散分配的基本单位是页<br>2.分段式存储管理：离散分配的基本单位是段<br>3.段页式存储管理：离散分配的基本单位是段、页</p>
<h1 id="分页存储管理方式"><a href="#分页存储管理方式" class="headerlink" title="分页存储管理方式"></a>分页存储管理方式</h1><h2 id="页面和物理块"><a href="#页面和物理块" class="headerlink" title="页面和物理块"></a>页面和物理块</h2><p><strong>空间划分</strong>：<br>将一个用户进程的地址空间（逻辑空间）划分成若干个大小相等的区域，称为<font color="red">页</font>或页面，各页从0开始编号。<br>内存空间也分成若干个与页大小相同的区域，称为<font color="red">块</font>，同样从0开始编号<br><strong>内存分配</strong>：<br>在为进程分配内存时以块为单位，将进程中若干页装入到多个不相邻的块中，最后一页常装不满一块而出现页内碎片</p>
<h2 id="地址结构"><a href="#地址结构" class="headerlink" title="地址结构"></a>地址结构</h2><p><strong>逻辑地址</strong>：<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/dedf0815fa70f0e55de49e0d543a105f_1740931194253.png"><br>地址长为32位<br>其中0-11位为页内地址，即每页的大小为2^12^&#x3D;4KB；<br>12-31位为页号，地址空间最多允许有2^20^&#x3D;1M页。<br><strong>物理地址</strong>：<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/cee543fee501755563b215e35c00980b_1740931194253.png"><br>地址长为22位<br>其中0-11位为块内地址，即每块的大小为2^12^&#x3D;4KB，与页相等<br>12-21位为块号，内存地址空间最多允许有2^10^&#x3D;1K块</p>
<h2 id="页表"><a href="#页表" class="headerlink" title="页表"></a>页表</h2><p>分页系统为每个进程配置一张页表，放在PCB中，执行时装入页表寄存器（PTR），进程逻辑地址空间中的每一页，在页表中都对应有一个页表项<br>页表存放在内存中，属于进程的现场信息<br>用途：1.记录进程的内存分配情况 　　2.实现进程运行时的动态重定位<br><font color="red">访问一个数据需访问内存两次，页表一次，内存一次</font><br>页表的基址及长度由<strong>页表寄存器</strong>给出<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/560a75a47c6e4646f8df021ac45da011_1740931194253.png" alt="在这里插入图片描述"><br>关于页面大小的问题：<br>若页面较小：减少了页内碎片，但使页表长度增加，占用内存较大，页面换进换出的速度将降低<br>若页面较大：页表长度减少，占用内存较小，页面换进换出的速度将提高，但增加了页内碎片，不利于提高内存利用率</p>
<h2 id="地址变换机构"><a href="#地址变换机构" class="headerlink" title="地址变换机构"></a>地址变换机构</h2><p>将用户地址空间中的逻辑地址变换为内存空间中的物理地址</p>
<h3 id="基本的地址变换机构"><a href="#基本的地址变换机构" class="headerlink" title="基本的地址变换机构"></a>基本的地址变换机构</h3><p>地址变换借助页表来完成，页表驻留内存<br>1.逻辑地址: 把相对地址分为页号和页内地址两部分。<br>2.越界中断: 页号与页表长度做比较，若页号大于等于页表长度，则产生地址越界中断<br>3.页表项定位：页表始址 + 页号 × 页表项长度。<br>4.查询页表：读出块号。<br>5.物理地址：块号 + 块内地址。（块内地址 &#x3D; 页内地址）<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/82c662adc1175a4c974f7c3cb2a1a2d3_1740931194253.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>例题<br>例：存储器的用户空间共有 32 个页面，每页 1KB，内存 16KB。假定某时刻系统为用户的第 0、1、2、3 页分别分配的物理块号为 5、10、4、7，试 将逻辑地址 0A5C 和 093C 变换为物理地址。<br>解：逻辑地址为：共有32个页，页号5位（2^5^&#x3D;32），每页1KB，页内位移10位；<br>物理地址为：内存16KB，每块1KB，共有16块，物理块号4位（2^4^&#x3D;16），每块1KB，块内位移10位。<br>逻辑地址 0A5C 对应的二进制为：00010 1001011100，前五位00010为页号，后十位1001011100为页内偏移，第2页对应的块号为4<br>故物理地址为0100 1001011100即125C<br>同理可求 093C 的物理地址为 113C。</p>
</blockquote>
<h3 id="具有快表的地址变换机构"><a href="#具有快表的地址变换机构" class="headerlink" title="具有快表的地址变换机构"></a>具有快表的地址变换机构</h3><p>基本的地址变换机构因为两次访问内存，所以地址变换速度低<br><strong>具有快表的地址变换机构</strong>：<br>目的：提高地址变换速度<br>快表：又称为联想寄存器<br>快表是一种特殊的高速缓冲存储器（Cache），内容是页表中的一部分或全部内容<br>CPU产生逻辑地址的页号，首先在快表中寻找，若命中就找出其对应的物理块；若未命中，再到页表中找其对应的物理块，并将之复制到快表。若快表中内容满，则按某种算法淘汰某些页。<br><img src="https://i-blog.csdnimg.cn/blog_migrate/2ac2587984a76dac5d7d32d4580980c2.png" alt="在这里插入图片描述">　<img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/a7da58904dc404185ce324680997b6c6_1740931202913.png" alt="在这里插入图片描述"></p>
<h2 id="访问内存的有效时间"><a href="#访问内存的有效时间" class="headerlink" title="访问内存的有效时间"></a>访问内存的有效时间</h2><p>有效访问时间（Effective Access Time,EAT）是指从给定逻辑地址，经过地址变换，到在内存中找到对应物理地址单元并取出数据所用的总时间</p>
<ul>
<li>基本地址变换机构<br>设T<del>M</del>为内存的访问时间<br>EAT&#x3D;2T<del>M</del></li>
<li>具有快表的地址变换机构<br>设P<del>TLB</del>为快表的命中率，T<del>TLB</del>为快表的访问时间<br>EAT&#x3D;P<del>TLB</del>*（T<del>TLB</del>+T<del>M</del>）+（1-P<del>TLB</del>）*（T<del>TLB</del>+2T<del>M</del>）</li>
</ul>
<h2 id="多级页表"><a href="#多级页表" class="headerlink" title="多级页表"></a>多级页表</h2><p>若逻辑地址空间很大，则划分的页比较多，页表就很大，占用的存储空间大，实现较困难</p>
<h3 id="两级页表"><a href="#两级页表" class="headerlink" title="两级页表"></a>两级页表</h3><p>将页表再进行分页，离散地将各个页表页面存放在不同的物理块中，同时也再建立一张外部页表用以记录页表页面对应的物理块号<br>正在运行的进程，必须把外部页表调入内存，而动态调入内部页表。只将当前所需的一些内层页表装入内存，其余部分根据需要再陆续调入<br><strong>逻辑地址</strong><br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/d57590badcf35a22549842be80c41ff0_1740931202913.png" alt="在这里插入图片描述"></p>
<p><strong>地址变换</strong><br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/ee6a1d0f78f201c97e79276073681164_1740931202913.png" alt="在这里插入图片描述"></p>
<p><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/f95e3896d6fe4b2fabbe9d79e97a3908_1740931202913.png" alt="在这里插入图片描述"></p>
<h3 id="多级页表-1"><a href="#多级页表-1" class="headerlink" title="多级页表"></a>多级页表</h3><p>将外层页表再进行分页，也将各外层页表页面离散地存放在不同的物理块中<br><strong>逻辑地址</strong><br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/c723c4ba4ea2837275d8a3fa6e0f599f_1740931202913.png" alt="在这里插入图片描述"></p>
<h2 id="反置页表"><a href="#反置页表" class="headerlink" title="反置页表"></a>反置页表</h2><p>对于 64 位逻辑地址空间的分页系统，如果规定页面大小为 4 KB 即 2^12^B，则在每个进程页表就由高达 2^52^ 页组成。设表中每项为 8byte，则 需 8 ∗2^52^ &#x3D;2^55^ &#x3D;32768 TB 的内存空间。<br>一般页表的页表项是按页号进行排序，页表项中的内容是物理块号<br>反置页表是为每一个<strong>物理块</strong>设置一个页表项并按物理块号排序，其中的内容是<strong>页号</strong>P及隶属<strong>进程标志符</strong>pid</p>
<p>利用反置页表进行地址变换：</p>
<ol>
<li>用进程标志符和页号去检索反置页表</li>
<li>如果检索完页表没有找到与之匹配的页表项，表明此页尚未调入内存</li>
<li>如果检索到，则表项的<strong>序号</strong>i表示该页的<strong>物理块号</strong>，将该块号与页内地址一起构成物理地址<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/7ee4b0fddaa202b7f600218185103ebf_1740931209630.png" alt="在这里插入图片描述"><br>反置页表可以有效减少页表占用的内存，但反置页表中只包含已经调入内存的页面，因此必须为每个进程建立一个外部页表，发现页面不在内存时才访问外部页表。<br>外部页表存放各页在外存中的物理位置。通过外部页表可将所需要的页面调入内存</li>
</ol>
<h2 id="页的共享与保护"><a href="#页的共享与保护" class="headerlink" title="页的共享与保护"></a>页的共享与保护</h2><p><strong>页的共享</strong><br>各进程把需要共享的数据&#x2F;程序的相应页指向相同物理块<br><strong>页的保护</strong><br>地址越界保护<br>在页表中设置保护位（定义操作权限：只读，读写，执行等）<br><strong>共享带来的问题</strong><br>若共享数据与不共享数据划在同一块中，则：有些不共享的数据也被共享，不易保密；计算共享数据的页内位移较困难</p>
<p>实现数据共享的最好方法：<font color="red">分段存储管理</font></p>
<h1 id="分段存储管理方式"><a href="#分段存储管理方式" class="headerlink" title="分段存储管理方式"></a>分段存储管理方式</h1><p>引入分段存储管理是为了满足用户的要求</p>
<ol>
<li>方便编程：通常一个作业是由多个程序段和数据段组成的，一般情况下，用户希望按逻辑关系对作业分段，并能根据名字来访问程序段和数据段</li>
<li>信息共享：共享是以信息的逻辑单位为基础的。页是存储信息的物理单位，段却是信息的逻辑单位；页式管理中地址空间是一维的，主程序，子程序都顺序排列，共享公用子程序比较困难，一个共享过程可能需要几十个页面</li>
<li>信息保护：页式管理中，一个页面中可能装有两个不同的子程序段的指令代码，不能通过页面共享实现共享一个逻辑上完整的子程序或数据块。段式管理中，可以以信息的逻辑单位进行保护</li>
<li>动态增长：实际应用中，某些段（数据段）会不断增长，前面的存储管理方法均难以实现。</li>
<li>动态链接：动态链接在程序运行时才把主程序和要用到的目标程序（程序段）链接起来。</li>
</ol>
<p><strong>空间划分</strong><br>将用户作业的逻辑地址空间划分成若干个<strong>大小不等</strong>的段。各段有段名，首地址为0</p>
<h2 id="利用段表实现地址映射"><a href="#利用段表实现地址映射" class="headerlink" title="利用段表实现地址映射"></a>利用段表实现地址映射</h2><p><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/5946c749081696234364befd8d0ea529_1740931209630.png" alt="在这里插入图片描述"></p>
<ul>
<li>段表记录了段与内存位置的对应关系</li>
<li>段表保存在内存中</li>
<li>段表的基址及长度由段表寄存器给出</li>
<li>访问一个字节的数据&#x2F;指令需访问内存两次（段表一次，内存一次）</li>
<li>逻辑地址由段号和段内地址组成</li>
</ul>
<h2 id="地址变换机构-1"><a href="#地址变换机构-1" class="headerlink" title="地址变换机构"></a>地址变换机构</h2><p>系统将逻辑地址中的段号S与段表长度TL进行比较<br>　　若S&gt;TL，表示段号太大，产生越界中断信号<br>　　若未越界，则根据段表的始址和该段的段号，计算出该段对应段表项的位置，从中读出该段在内存的始址<br>再检查段内地址d，是否超过该段的段长SL<br>　　若超过，同样发出越界中断信号<br>　　若未越界，则将该段的基址与段内地址d相加，即可得到要访问的内存物理地址<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/2c193c15fb19708d160d99bacf51719f_1740931209630.png" alt="在这里插入图片描述"></p>
<h2 id="信息共享"><a href="#信息共享" class="headerlink" title="信息共享"></a>信息共享</h2><p>例：一个多用户系统，可同时接纳40个用户，都执行一个文本编辑程序(Text Editor)。如果文本编辑程序有160KB的代码和另外 40 KB 的数据区，如果不共享，则总共需有8MB的内存空间来支持40个用户。<br>如果 160 KB 的代码是可重入的，则无论是在分页系统还是在分段系统中，该代码都能被共享。<br>在内存中只需保留一份文本编辑程序的副本，此时所需的内存空间仅为1760 KB(40×40+160)，而不是 (160+40)×40&#x3D; 8000KB 。<br><strong>分页系统的共享</strong><br>假定每个页面的大小为4KB，160KB的代码将占用40个页面，数据区占10个页面<br>为实现代码的共享，应在每个进程的页表中都建立40个页表项，它们的物理块号是21~60。在每个进程的页表中，数据区页表项的物理块号是61~70、71~80<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/418824adab6e36f209e5bea62bf76e79_1740931209630.png" alt="在这里插入图片描述"></p>
<p><strong>分段系统的共享</strong><br>在分段系统中，实现共享容易的多，只需在每个进程的段表中为文本编辑程序设置一个段表项<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/10c1a8d5af931761c47d6933bc3c7716_1740931209630.png" alt="在这里插入图片描述"></p>
<h1 id="分页与分段的主要区别"><a href="#分页与分段的主要区别" class="headerlink" title="分页与分段的主要区别"></a>分页与分段的主要区别</h1><ul>
<li>页是信息的<font color="red">物理</font>单位，分页仅仅是由于系统管理的需要，对用户透明的。段是信息的<font color="red">逻辑</font>单位，分段的目的是为了能更好的满足用户的需要。</li>
<li>页的<font color="red">大小固定</font>且由系统确定，把逻辑地址划分为页号和页内地址两部分。段的长度<font color="red">不固定</font>，决定于用户所编写的程序</li>
<li>分页的作业地址空间是<font color="red">一维</font>的，分段的作业地址空间是<font color="red">二维</font>的</li>
<li>页和段都有存储保护机制。但存取权限不同：段有读、写和执行三种权限；而页只有读和写两种权限<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/acfcd7b61483fa0fc282902e8b7edce6_1740931218965.png" alt="在这里插入图片描述"></li>
</ul>
<h1 id="段页式存储管理方式"><a href="#段页式存储管理方式" class="headerlink" title="段页式存储管理方式"></a>段页式存储管理方式</h1><p>段页式存储管理是分段和分页原理的结合，即先将用户程序分成若干个段，并为每一个段赋一个段名，再把每个段分成若干个页<br>其地址结构由段号、段内页号及页内位移三部分所组成<br>系统中设段表和页表，均存放于内存中。读一字节的指令或数据须访问内存三次。<br>每个进程一张段表，每个段一张页表<br>段表含段号、页表始址和页表长度<br>页表含页号和块号</p>
<h2 id="段页式存储管理的地址变换"><a href="#段页式存储管理的地址变换" class="headerlink" title="段页式存储管理的地址变换"></a>段页式存储管理的地址变换</h2><ol>
<li>从PCB中取出段表始址和段表长度，装入段表寄存器</li>
<li>将段号与段表长度进行比较，若段号大于或等于段表长度，产生越界中断</li>
<li>利用段表始址与段号得到该段表项在段表中的位置。取出该段的页表始址和页表长度</li>
<li>将页号与页表长度进行比较，若页号大于等于页表长度，产生越界中断</li>
<li>利用页表始址与页号得到该页表项在页表中的位置</li>
<li>取出该页的物理块号，与页内地址拼接得到实际的物理地址<br><img src="https://cdn.jsdelivr.net/gh/shnpd/blog-pic@main/csdn/3e54dbf18d43710129394ef9b823ade3_1740931218965.png" alt="在这里插入图片描述"></li>
</ol>
</div><div class="article-licensing box"><div class="licensing-title"><p>操作系统笔记整理7——存储器管理（2）</p><p><a href="https://shnpd.github.io/2021/12/30/操作系统/操作系统笔记整理7——存储器管理（2）/">https://shnpd.github.io/2021/12/30/操作系统/操作系统笔记整理7——存储器管理（2）/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>ShiHaonan</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-12-30</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2025-03-13</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/os-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">os 操作系统</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/images/alipay.jpg" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/images/wxpay.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/12/31/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%868%E2%80%94%E2%80%94%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8%E5%99%A8/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">操作系统笔记整理8——虚拟存储器</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/12/30/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%866%E2%80%94%E2%80%94%E5%AD%98%E5%82%A8%E5%99%A8%E7%AE%A1%E7%90%86%EF%BC%881%EF%BC%89/"><span class="level-item">操作系统笔记整理6——存储器管理（1）</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card" id="comments"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://shnpd.github.io/2021/12/30/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%867%E2%80%94%E2%80%94%E5%AD%98%E5%82%A8%E5%99%A8%E7%AE%A1%E7%90%86%EF%BC%882%EF%BC%89/';
            this.page.identifier = '2021/12/30/操作系统/操作系统笔记整理7——存储器管理（2）/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'shns-blog' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#点此链接可跳转到：操作系统笔记整理——目录索引页"><span class="level-left"><span class="level-item">1</span><span class="level-item">点此链接可跳转到：操作系统笔记整理——目录索引页</span></span></a></li><li><a class="level is-mobile" href="#离散分配方式"><span class="level-left"><span class="level-item">2</span><span class="level-item">离散分配方式</span></span></a></li><li><a class="level is-mobile" href="#分页存储管理方式"><span class="level-left"><span class="level-item">3</span><span class="level-item">分页存储管理方式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#页面和物理块"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">页面和物理块</span></span></a></li><li><a class="level is-mobile" href="#地址结构"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">地址结构</span></span></a></li><li><a class="level is-mobile" href="#页表"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">页表</span></span></a></li><li><a class="level is-mobile" href="#地址变换机构"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">地址变换机构</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#基本的地址变换机构"><span class="level-left"><span class="level-item">3.4.1</span><span class="level-item">基本的地址变换机构</span></span></a></li><li><a class="level is-mobile" href="#具有快表的地址变换机构"><span class="level-left"><span class="level-item">3.4.2</span><span class="level-item">具有快表的地址变换机构</span></span></a></li></ul></li><li><a class="level is-mobile" href="#访问内存的有效时间"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">访问内存的有效时间</span></span></a></li><li><a class="level is-mobile" href="#多级页表"><span class="level-left"><span class="level-item">3.6</span><span class="level-item">多级页表</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#两级页表"><span class="level-left"><span class="level-item">3.6.1</span><span class="level-item">两级页表</span></span></a></li><li><a class="level is-mobile" href="#多级页表-1"><span class="level-left"><span class="level-item">3.6.2</span><span class="level-item">多级页表</span></span></a></li></ul></li><li><a class="level is-mobile" href="#反置页表"><span class="level-left"><span class="level-item">3.7</span><span class="level-item">反置页表</span></span></a></li><li><a class="level is-mobile" href="#页的共享与保护"><span class="level-left"><span class="level-item">3.8</span><span class="level-item">页的共享与保护</span></span></a></li></ul></li><li><a class="level is-mobile" href="#分段存储管理方式"><span class="level-left"><span class="level-item">4</span><span class="level-item">分段存储管理方式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#利用段表实现地址映射"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">利用段表实现地址映射</span></span></a></li><li><a class="level is-mobile" href="#地址变换机构-1"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">地址变换机构</span></span></a></li><li><a class="level is-mobile" href="#信息共享"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">信息共享</span></span></a></li></ul></li><li><a class="level is-mobile" href="#分页与分段的主要区别"><span class="level-left"><span class="level-item">5</span><span class="level-item">分页与分段的主要区别</span></span></a></li><li><a class="level is-mobile" href="#段页式存储管理方式"><span class="level-left"><span class="level-item">6</span><span class="level-item">段页式存储管理方式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#段页式存储管理的地址变换"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">段页式存储管理的地址变换</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-04-21T12:20:00.000Z">2025-04-21</time></p><p class="title"><a href="/2025/04/21/gonote/%E3%80%90Go%E3%80%91%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">【Go】堆和栈变量</a></p><p class="categories"><a href="/categories/Golang/">Golang</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-03-19T16:00:00.000Z">2025-03-20</time></p><p class="title"><a href="/2025/03/20/gonote/%E3%80%90Go%E3%80%91atomic%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C/">【Go】atomic原子操作</a></p><p class="categories"><a href="/categories/Golang/">Golang</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-03-14T16:00:00.000Z">2025-03-15</time></p><p class="title"><a href="/2025/03/15/interview/redis/%E3%80%90redis%E3%80%91%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">【redis】数据类型</a></p><p class="categories"><a href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/">知识点整理</a> / <a href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/redis/">redis</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-03-02T16:00:00.000Z">2025-03-03</time></p><p class="title"><a href="/2025/03/03/gonote/%E3%80%90Go%E3%80%91Channel/">【Go】Channel</a></p><p class="categories"><a href="/categories/Golang/">Golang</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-03-02T16:00:00.000Z">2025-03-03</time></p><p class="title"><a href="/2025/03/03/gonote/%E3%80%90Go%E3%80%91CSP%E6%A8%A1%E5%9E%8B/">【Go】CSP模型</a></p><p class="categories"><a href="/categories/Golang/">Golang</a></p></div></article></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Fabric/"><span class="level-start"><span class="level-item">Fabric</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Golang/"><span class="level-start"><span class="level-item">Golang</span></span><span class="level-end"><span class="level-item tag">45</span></span></a></li><li><a class="level is-mobile" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Shell%E8%84%9A%E6%9C%AC/"><span class="level-start"><span class="level-item">Shell脚本</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/bytedance/"><span class="level-start"><span class="level-item">bytedance</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%BB%A5%E5%A4%AA%E5%9D%8A/"><span class="level-start"><span class="level-item">以太坊</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%88%B7%E9%A2%98%E9%9B%86/"><span class="level-start"><span class="level-item">刷题集</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"><span class="level-start"><span class="level-item">区块链</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%AD%A6%E6%9C%AF/"><span class="level-start"><span class="level-item">学术</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"><span class="level-start"><span class="level-item">密码学</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"><span class="level-start"><span class="level-item">小程序</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="level-start"><span class="level-item">操作系统</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="level-start"><span class="level-item">数据结构</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">机器学习</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%9D%82%E9%A1%B9/"><span class="level-start"><span class="level-item">杂项</span></span><span class="level-end"><span class="level-item tag">31</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%AF%94%E7%89%B9%E5%B8%81/"><span class="level-start"><span class="level-item">比特币</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/"><span class="level-start"><span class="level-item">知识点整理</span></span><span class="level-end"><span class="level-item tag">19</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/mysql/"><span class="level-start"><span class="level-item">mysql</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/redis/"><span class="level-start"><span class="level-item">redis</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="level-start"><span class="level-item">操作系统</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><span class="level-start"><span class="level-item">计算机网络</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">算法</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"><span class="level-start"><span class="level-item">网络安全</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><span class="level-start"><span class="level-item">计算机网络</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li></ul></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">shn&#039;s blog</a><p class="is-size-7"><span>&copy; 2025 ShiHaonan</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">Welcome to shn's blog!</p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>